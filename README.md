# Luzifer / gpg\_verify

This project is mainly a proof-of-concept for myself whether it is possible to have a small web-service to check the detached signatures of a file hosted somewhere in the web and generating a badge for the integrity of the file.

## Context

Assume this: You need to provide a PDF document in the internet which will be downloaded at some time by any person not being capable of verifying a GPG signature for this document. Though the person is required to check whether the document has not been altered since you uploaded it several time ago.

Using this service you can embed a badge into the same page which is generated by a small service downloading the PDF document and a detached signature file and verifying them. The person having to trust the contents of the PDF now sees a badge stating the file still has its original contents.

## Security limitations

- If not delivered using HTTPs the badge can get changed by ant MITM attack
- If the attacker gets access to the page embedding the badge they can change the required key and then replace the signature with an own signature matching the modified file
- The integrity of the key is not checked
- The trustworthiness of the key can not be checked as it would need to have a trusted signature (WoT)

## Example

I placed a cat image and a matching signature in the `example` folder of this repository. Also there is a hosted version of this service which is used for this example:

![Signature Verification](https://gpgverify.hub.luzifer.io/verify?url=https://raw.githubusercontent.com/Luzifer/gpg_verify/master/example/cat-hunting.jpg&key=D34BE99E)

The signature is verified by this URL (line splits for better readability):

```
https://gpgverify.hub.luzifer.io/verify
  ?url=https://raw.githubusercontent.com/Luzifer/gpg_verify/master/example/cat-hunting.jpg
  &key=D34BE99E
```

## Usage

- Get the file you want to verify
- Generate the signature:  
```
# gpg --output cat-hunting.jpg.asc --detach-sign cat-hunting.jpg
```
- Upload the two files into the same directory
- Build the verification URL as shown above
